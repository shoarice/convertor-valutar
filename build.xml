<?xml version="1.0" encoding="UTF-8"?>

<project name="Convertor valutar" default="dist">

	<target name="dist" depends="clean,init,build,jar,cleanup">
		<zip destfile="${dist}/${ant.project.name}.zip" basedir="${dist}" level="9"/>
	</target>

	<target name="clean" description="deletes all the artifacts  generated by this buildfile">
		<delete includeemptydirs="true">
			<fileset dir="${basedir}">
				<include name="dist*/"/>
				<include name="${build}/"/>
			</fileset>
		</delete>
	</target>

	<target name="init" description="generates the timestamp and all the necessary folders">
		<tstamp>
			<format property="time" pattern="dMMyyyy-HH-mm"/>
		</tstamp>
		<property name="src" value="src" />
		<property name="build" value="build" />
		<property name="dist" value="dist-${time}" />
		<property name="jar" value="${ant.project.name}.jar" />

		<mkdir dir="${dist}" />
		<mkdir dir="${build}"/>
	</target>

	<target name="build" description="compiles the source files and copies the resource files in he build folder">

		<javac sourcepath="" srcdir="${src}" destdir="${build}" includeantruntime="false">
			<include name="**/*.java"/>
			<exclude name="**/gui/MainFrame.java"/>
			<exclude name="**/test/**"/>
		</javac>

		<copy todir="${build}" file="res/fullCurrNames.xml"/>
	</target>

	<target name="jar" description="generates a executable jar file from the compiled files">
		<jar destfile="${dist}/${jar}" manifest="${src}/org/baltoaca/conv_valut/manifest.mf">

			<fileset dir="${build}">
				<exclude name="**/test"/>
			</fileset>

		</jar>
	</target>
	
	<target name="cleanup" description="cleans up after the dist task by deleteing the compiled files">
		<delete dir="${build}" includeemptydirs="true"/>
	</target>
	


</project>
